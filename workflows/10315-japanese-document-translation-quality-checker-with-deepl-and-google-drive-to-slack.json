{
  "id": "MOst08M9BYcBnP4g",
  "meta": {
    "instanceId": "15d6057a37b8367f33882dd60593ee5f6cc0c59310ff1dc66b626d726083b48d",
    "templateCredsSetupCompleted": true
  },
  "tags": [],
  "nodes": [
    {
      "id": "60887f7a-e208-4543-be68-da1b53eb31cc",
      "name": "Watch for New Japanese Documents",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "position": [
        -1904,
        880
      ],
      "parameters": {
        "event": "fileCreated",
        "options": {},
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "mode": "id",
          "value": "<__PLACEHOLDER_VALUE__ç›£è¦–å¯¾è±¡ã®Google Driveãƒ•ã‚©ãƒ«ãƒ€ID__>"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "e2600bcc-7bb7-4b51-a719-e382cd730cb8",
      "name": "Send Slack Notification",
      "type": "n8n-nodes-base.slack",
      "position": [
        -336,
        880
      ],
      "webhookId": "62a46f55-d1bd-4d58-bc88-f8f356c5931d",
      "parameters": {
        "text": "=ğŸ” Translation Quality Report Ready\n\nFile: {{ $('Generate Diff Analysis').first().json.fileName }}\nQuality Score: {{ (100 - parseFloat($('Generate Diff Analysis').first().json.diffPercentage)).toFixed(2) }}%\nDifferences: {{ $('Generate Diff Analysis').first().json.diffCount }}\n\nğŸ“„ Report: {{ $json.documentUrl }}",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Workflow Configuration').first().json.slackChannel }}"
        },
        "otherOptions": {},
        "authentication": "oAuth2"
      },
      "typeVersion": 2.3
    },
    {
      "id": "f0ed9077-f7f9-49aa-be69-528374839ef6",
      "name": "Create Diff Report in Google Docs",
      "type": "n8n-nodes-base.googleDocs",
      "position": [
        -560,
        880
      ],
      "parameters": {
        "title": "={{ 'Translation Quality Report - ' + $json.fileName }}",
        "driveId": "My Drive",
        "folderId": "={{ $('Workflow Configuration').first().json.targetFolder }}"
      },
      "typeVersion": 2
    },
    {
      "id": "0114cd5c-ab38-4aaa-a3b5-fb81e2857921",
      "name": "Generate Diff Analysis",
      "type": "n8n-nodes-base.code",
      "position": [
        -784,
        880
      ],
      "parameters": {
        "jsCode": "const originalText = $('Get Text via Authenticated API Call').first().json.data;\nconst translatedText = $('Translate JP to EN').first().json.text;\nconst backTranslatedText = $('Back-Translate EN to JP').first().json.text;\nconst fileName = $('Watch for New Japanese Documents').first().json.name;\n\n// Simple character-by-character diff\nfunction generateDiff(original, backTranslated) {\n  const maxLen = Math.max(original.length, backTranslated.length);\n  let diffReport = [];\n  \n  for (let i = 0; i < maxLen; i++) {\n    const origChar = original[i] || '';\n    const backChar = backTranslated[i] || '';\n    \n    if (origChar !== backChar) {\n      diffReport.push({\n        position: i,\n        original: origChar,\n        backTranslated: backChar\n      });\n    }\n  }\n  \n  return diffReport;\n}\n\nconst differences = generateDiff(originalText, backTranslatedText);\nconst diffPercentage = ((differences.length / Math.max(originalText.length, backTranslatedText.length)) * 100).toFixed(2);\n\nreturn [{\n  json: {\n    fileName,\n    originalText,\n    translatedText,\n    backTranslatedText,\n    differences,\n    diffCount: differences.length,\n    diffPercentage,\n    summary: `Translation quality: ${100 - diffPercentage}% match between original and back-translation`\n  }\n}];"
      },
      "typeVersion": 2
    },
    {
      "id": "f7b745b2-d348-4d90-8c36-b7d2cb6d1523",
      "name": "Back-Translate EN to JP",
      "type": "n8n-nodes-base.deepL",
      "position": [
        -1008,
        880
      ],
      "parameters": {
        "text": "={{ $json.text }}",
        "translateTo": "JA",
        "additionalFields": {
          "sourceLang": "EN"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "01968967-b19f-43f9-ab7b-52df76afccc3",
      "name": "Translate JP to EN",
      "type": "n8n-nodes-base.deepL",
      "position": [
        -1232,
        880
      ],
      "parameters": {
        "text": "={{ $('Get Text via Authenticated API Call').first().json.data }}",
        "translateTo": "EN-US",
        "additionalFields": {
          "sourceLang": "JA"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "18637617-7c71-4f0c-af19-eb9c726b87f7",
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "position": [
        -1680,
        880
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "targetFolder",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Google Drive folder ID for storing diff reports__>"
            },
            {
              "id": "id-2",
              "name": "slackChannel",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Slack channel ID or name (e.g., #translations)__>"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "0421a90b-61dd-44ff-a3d4-6c6edeac2870",
      "name": "Get Text via Authenticated API Call",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -1456,
        880
      ],
      "parameters": {
        "url": "=https://www.googleapis.com/drive/v3/files/{{ $('Watch for New Japanese Documents').first().json.id }}/export?mimeType=text/plain",
        "options": {},
        "sendHeaders": true,
        "authentication": "predefinedCredentialType",
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "=Bearer {{$credentials.googleDriveOAuth2Api.accessToken}}"
            }
          ]
        },
        "nodeCredentialType": "googleDriveOAuth2Api"
      },
      "typeVersion": 4.1
    },
    {
      "id": "7ec9dad8-5ef7-4639-b2ef-ec2b8acbbe61",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2736,
        624
      ],
      "parameters": {
        "width": 768,
        "height": 960,
        "content": "## Whoâ€™s it for\n\nTeams that translate Japanese documents and want an automatic, objective signal when quality dropsâ€”localization leads, QA reviewers, and operations teams.\n\n## What it does / How it works\n\nWhen a new Japanese file lands in a specific Google Drive folder, the workflow exports the text, translates it JA â†’ EN (DeepL), back-translates EN â†’ JA, then compares original vs. back-translation to estimate a quality score. It writes a Google Docs report and posts a Slack notification with the score and diffs.\n\n### å…·ä½“ä¾‹\n\n#### å“è³ªã‚¹ã‚³ã‚¢ã®è¨ˆç®—æ–¹æ³•\nå“è³ªã‚¹ã‚³ã‚¢ã¯ã€å…ƒã®æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã¨ã€è‹±èªã«ç¿»è¨³ã—ãŸå¾Œã«å†åº¦æ—¥æœ¬èªã«ã€Œé€†ç¿»è¨³ã€ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’æ¯”è¼ƒã—ã€ãã®ä¸€è‡´ç‡ã‚’ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸ã§ç¤ºã—ã¾ã™ã€‚\n\n**è¨ˆç®—å¼:**\n`å“è³ªã‚¹ã‚³ã‚¢ = 100 - (å·®ç•°æ–‡å­—æ•° / å…¨æ–‡å­—æ•° * 100)`\n\n**ä¾‹:**\n- **å…ƒã®ãƒ†ã‚­ã‚¹ãƒˆ:** `ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã§ã™` (8æ–‡å­—)\n- **é€†ç¿»è¨³ãƒ†ã‚­ã‚¹ãƒˆ:** `ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã ` (8æ–‡å­—)\n- æœ€å¾Œã®ã€Œã™ã€ã¨ã€Œã ã€ãŒç•°ãªã‚‹ãŸã‚ã€å·®ç•°æ–‡å­—æ•°ã¯ `1` ã§ã™ã€‚\n- **å·®ç•°ã®å‰²åˆ:** `(1 / 8) * 100 = 12.5%`\n- **å“è³ªã‚¹ã‚³ã‚¢:** `100 - 12.5 = 87.5%`\n\n#### ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\nãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã€Slackã§é€šçŸ¥ã‚’é€ä¿¡ã—ã¾ã™ã€‚\n\n**Slacké€šçŸ¥ã®ä¾‹:**\n```\nğŸ” Translation Quality Report Ready\n\nFile: monthly_report_JP.docx\nQuality Score: 87.50%\nDifferences: 1\n\nğŸ“„ Report: https://docs.google.com/document/d/...\n```\n\n**Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ¬ãƒãƒ¼ãƒˆä¾‹:**\n- **ã‚¿ã‚¤ãƒˆãƒ«:** `Translation Quality Report - monthly_report_JP.docx`\n- **å†…å®¹:**\n    - **ãƒ•ã‚¡ã‚¤ãƒ«å:** `monthly_report_JP.docx`\n    - **å“è³ªã‚¹ã‚³ã‚¢:** `87.50%`\n    - **å·®ç•°ã®æ•°:** `1`\n    - ---\n    - **å…ƒã®ãƒ†ã‚­ã‚¹ãƒˆï¼ˆJPï¼‰:** `ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã§ã™`\n    - **é€†ç¿»è¨³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆJPï¼‰:** `ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã `\n    - **ä¸­é–“ç¿»è¨³ï¼ˆENï¼‰:** `Today the weather is good`\n\n## How to set up\n\n1. Connect Google Drive, DeepL, Slack credentials.\n2. Point the Google Drive Trigger to your â€œincoming JP docsâ€ folder.\n3. In **Workflow Configuration** (Set node), fill `targetFolder` (for reports) and `slackChannel`.\n4. Run once manually, then activate.\n5. Drop a JP doc (Google Docs / exportable) into the watched folder to test.\n\n## Requirements\n\n* n8n (self-hosted or Cloud)\n* Google Drive, DeepL, Slack credentials\n* A Drive folder for incoming JP docs + a folder for reports"
      },
      "typeVersion": 1
    },
    {
      "id": "e0bd2b2d-cb01-4d1e-8ae8-be21c7479335",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -976,
        1072
      ],
      "parameters": {
        "color": 7,
        "width": 768,
        "height": 176,
        "content": "### Troubleshooting\n\n* **URL validation / 403** â†’ Reconnect Drive OAuth and confirm export scopes.\n* **Empty text** â†’ Confirm file is Google Docs or exportable MIME.\n* **Slack not posting** â†’ Check `slackChannel` value and app channel permission.\n* **DeepL errors** â†’ Verify quota, region, and credentials binding in n8n.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "a1b2c3d4-e5f6-4g7h-8i9j-k0l1m2n3o4p5",
      "name": "Sticky Note - Advanced",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -976,
        1344
      ],
      "parameters": {
        "color": 2,
        "width": 768,
        "height": 416,
        "content": "### âœ¨ é«˜åº¦ãªè¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º\n\n- **ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ã®å¤‰æ›´:**\nDeepLãƒãƒ¼ãƒ‰ã‚’Google Translateãªã©ä»–ã®ç¿»è¨³ã‚µãƒ¼ãƒ“ã‚¹ãƒãƒ¼ãƒ‰ã«ç½®ãæ›ãˆå¯èƒ½ã§ã™ã€‚APIã‚­ãƒ¼ç­‰ã®èªè¨¼æƒ…å ±ã‚’é©åˆ‡ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚\n\n- **å·®åˆ†åˆ†æãƒ­ã‚¸ãƒƒã‚¯ã®å¼·åŒ–:**\nç¾åœ¨ã®ã€ŒGenerate Diff Analysisã€ãƒãƒ¼ãƒ‰ã¯æ–‡å­—å˜ä½ã®æ¯”è¼ƒã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†ã—ã€å˜èªå˜ä½ã®æ¯”è¼ƒï¼ˆ`diff`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã‚’åˆ©ç”¨ï¼‰ã‚„ã€ã‚ˆã‚Šé«˜åº¦ãªè‡ªç„¶è¨€èªå‡¦ç†ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\n- **é€šçŸ¥ãƒãƒ£ãƒãƒ«ã®è¿½åŠ :**\nSlackãƒãƒ¼ãƒ‰ã®å¾Œã‚ã«ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚„Microsoft Teamsãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã€è¤‡æ•°ã®ãƒãƒ£ãƒãƒ«ã«é€šçŸ¥ã§ãã¾ã™ã€‚\n\n- **APIåˆ©ç”¨é‡ã®æ³¨æ„:**\nã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ ã”ã¨ã«DeepL APIã‚’2å›ï¼ˆç¿»è¨³ï¼‹é€†ç¿»è¨³ï¼‰å‘¼ã³å‡ºã—ã¾ã™ã€‚å¤§é‡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡¦ç†ã™ã‚‹å ´åˆã€DeepLã®åˆ©ç”¨æ–™é‡‘ã‚„ãƒ—ãƒ©ãƒ³ä¸Šé™ã«ã”æ³¨æ„ãã ã•ã„ã€‚\n\n- **ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã®åˆ¶é™:**\nãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºã¯Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¾ãŸã¯ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¯èƒ½ãªãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹: .docxï¼‰ã§æœ€é©ã«å‹•ä½œã—ã¾ã™ã€‚ã‚¹ã‚­ãƒ£ãƒ³ã•ã‚ŒãŸPDFã‚„ç”»åƒå†…ã®ãƒ†ã‚­ã‚¹ãƒˆã¯æŠ½å‡ºã§ãã¾ã›ã‚“ã€‚"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c69777ba-f626-4b80-a9c1-a54000b08597",
  "connections": {
    "Translate JP to EN": {
      "main": [
        [
          {
            "node": "Back-Translate EN to JP",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Diff Analysis": {
      "main": [
        [
          {
            "node": "Create Diff Report in Google Docs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Workflow Configuration": {
      "main": [
        [
          {
            "node": "Get Text via Authenticated API Call",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Back-Translate EN to JP": {
      "main": [
        [
          {
            "node": "Generate Diff Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Watch for New Japanese Documents": {
      "main": [
        [
          {
            "node": "Workflow Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Diff Report in Google Docs": {
      "main": [
        [
          {
            "node": "Send Slack Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Text via Authenticated API Call": {
      "main": [
        [
          {
            "node": "Translate JP to EN",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}